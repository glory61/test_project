<html>
<head>
    <link rel="stylesheet" type="text/css" href="/styles.css">.
</head>
<body>
<div class="form-container">
    <h3>Patients</h3>
    <textarea name="patients" placeholder="Enter patients data"></textarea>

    <h3>Doctors</h3>
    <textarea name="doctors" placeholder="Enter doctors data"></textarea>

    <h3>Appointments</h3>
    <textarea name="appointments" placeholder="Enter appointments data"></textarea>

    <div class="button-group">
        <button type="submit" onclick="submitForm()">Submit Data</button>
        <form action="/cleardb" method="POST">
            <button type="submit" onclick="clearDB(event)">Clear</button>
        </form>
    </div>
</div>

<div id="overlay" class="overlay">
    <div class="modal">
        <p id="modalMessage"></p>
    </div>
</div>

<script>
    function submitForm() {
        const patientsData = document.querySelector('textarea[name="patients"]').value;
        const doctorsData = document.querySelector('textarea[name="doctors"]').value;
        const appointmentsData = document.querySelector('textarea[name="appointments"]').value;

        // Send the form data to the server using fetch
        fetch('/data', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                patients: patientsData,
                doctors: doctorsData,
                appointments: appointmentsData
            })
        })
            .then(response => response.text())
            .then(message => {
                // Display the modal overlay
                document.getElementById('modalMessage').innerHTML = message;
                document.getElementById('overlay').classList.add('active');
                connectedClients.forEach((client) => {
                    client.send('reload');
                });
            })
            .catch(error => {
                console.error('Error submitting form:', error);
            });
    }
    function closeModal() {
        // Close the modal overlay and clear the form
        document.getElementById('overlay').classList.remove('active');
        document.querySelector('textarea[name="patients"]').value = '';
        document.querySelector('textarea[name="doctors"]').value = '';
        document.querySelector('textarea[name="appointments"]').value = '';
    }
    function clearDB() {
        // Send a request to the server to clear the database
        event.preventDefault();
        fetch('/cleardb', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => response.text())
            .then(message => {
                // Display the modal overlay
                document.getElementById('modalMessage').innerHTML = message;
                document.getElementById('overlay').classList.add('active');
                connectedClients.forEach((client) => {
                    client.send('reload');
                });
            })
            .catch(error => {
                console.error('Error clearing database:', error);
            });
    }

</script>
</body>
<script src="./transpiled.js"></script>
</html>
